{% include base_path %}
<!-- start custom head snippets -->
<!-- favicon from https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_academic-progressive.svg -->
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png"/>
<link rel="icon" type="image/svg+xml" href="{{ base_path }}/images/favicon.svg"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-192x192.png" sizes="192x192"/>
<link rel="manifest" href="{{ base_path }}/images/manifest.json"/>
<link rel="icon" href="/images/favicon.ico"/>
<meta name="theme-color" content="#ffffff"/>
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>
<!-- Support for MatJax -->
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- 代码块复制按钮 -->
<style>
.highlight {
  position: relative;
}

.copy-code-button {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 4px 8px;
  background-color: #f8f8f8;
  border: 1px solid #e1e4e8;
  border-radius: 3px;
  font-size: 12px;
  color: #586069;
  cursor: pointer;
  z-index: 1;
  transition: all 0.2s;
}

.copy-code-button:hover {
  background-color: #e1e4e8;
}

.copy-code-button.copied {
  background-color: #28a745;
  color: white;
  border-color: #28a745;
}

/* 确保代码块有足够的右边距 */
.highlight pre {
  padding-right: 80px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 为所有代码块添加复制按钮
  const codeBlocks = document.querySelectorAll('.highlight');
  
  codeBlocks.forEach(function(codeBlock) {
    const button = document.createElement('button');
    button.className = 'copy-code-button';
    button.textContent = 'Copy';
    button.setAttribute('aria-label', 'Copy code to clipboard');
    
    button.addEventListener('click', function() {
      const code = codeBlock.querySelector('pre code') || codeBlock.querySelector('pre');
      const text = code.textContent || code.innerText;
      
      navigator.clipboard.writeText(text).then(function() {
        button.textContent = 'Copied!';
        button.classList.add('copied');
        
        setTimeout(function() {
          button.textContent = 'Copy';
          button.classList.remove('copied');
        }, 2000);
      }).catch(function(err) {
        console.error('Failed to copy: ', err);
        button.textContent = 'Error';
        setTimeout(function() {
          button.textContent = 'Copy';
        }, 2000);
      });
    });
    
    codeBlock.appendChild(button);
  });
});
</script>

<!-- end custom head snippets -->
